# APIç®¡ç†ã‚¬ã‚¤ãƒ‰ - ShinAI Website

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (`project/website-main/api/`) ã¯ã€ShinAI Websiteã®å…¨APIã‚’ä¸€å…ƒç®¡ç†ã—ã¾ã™ã€‚

**æœ€çµ‚æ›´æ–°**: 2025-12-08
**ç®¡ç†å ´æ‰€**: `C:\Users\masa\ai-long-memoryi-system\project\website-main\api\`

---

## ğŸ—ï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
project/website-main/api/
â”œâ”€â”€ chatbot-api.js           # ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆAPIï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”œâ”€â”€ contact-api.js           # ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ API
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ simple-rag-system.js # RAGã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ¤œç´¢ãƒ»ç”Ÿæˆï¼‰
â”œâ”€â”€ knowledge-base/          # RAGçŸ¥è­˜ãƒ™ãƒ¼ã‚¹
â”œâ”€â”€ routes/                  # APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”œâ”€â”€ middleware/              # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”œâ”€â”€ models/                  # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ scripts/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ vercel.json              # Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
â”œâ”€â”€ package.json             # Node.jsä¾å­˜é–¢ä¿‚
â””â”€â”€ .gitignore               # Gité™¤å¤–è¨­å®š
```

---

## ğŸš€ APIä¸€è¦§

### 1. ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆAPI (`chatbot-api.js`)

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://api-massaa39s-projects.vercel.app/api/chatbot`

**æ©Ÿèƒ½**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡
- RAGã‚·ã‚¹ãƒ†ãƒ ã§çŸ¥è­˜æ¤œç´¢
- OpenAI GPT-4ã§å¿œç­”ç”Ÿæˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

**ä¾å­˜é–¢ä¿‚**:
- `lib/simple-rag-system.js` (RAGæ¤œç´¢)
- `knowledge-base/` (çŸ¥è­˜ãƒ™ãƒ¼ã‚¹)
- OpenAI API (ç’°å¢ƒå¤‰æ•°: `OPENAI_API_KEY`)

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹**:
```json
{
  "message": "ShinAIã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„",
  "sessionId": "session-12345"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "response": "ShinAIã§ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã‚«ã‚¹ã‚¿ãƒ AIé–‹ç™º...",
  "sessionId": "session-12345"
}
```

---

### 2. ãŠå•ã„åˆã‚ã›API (`contact-api.js`)

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://api-massaa39s-projects.vercel.app/api/contact`

**æ©Ÿèƒ½**:
- ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: `contact_inquiries.db` (SQLite)
**æ³¨æ„**: âŒ Gitã«ãƒ—ãƒƒã‚·ãƒ¥ç¦æ­¢ï¼ˆå€‹äººæƒ…å ±å«ã‚€ï¼‰

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹**:
```json
{
  "name": "å±±ç”°å¤ªéƒ",
  "email": "yamada@example.com",
  "company": "æ ªå¼ä¼šç¤¾Example",
  "message": "AIã‚·ã‚¹ãƒ†ãƒ å°å…¥ã«ã¤ã„ã¦ç›¸è«‡ã—ãŸã„"
}
```

---

## ğŸ”’ æ©Ÿå¯†æƒ…å ±ç®¡ç†

### Gité™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ« (`.gitignore`)

```gitignore
.vercel
.env
.env*.local
*.db
*.key
*.log
node_modules/
```

### âŒ çµ¶å¯¾ã«ãƒ—ãƒƒã‚·ãƒ¥ç¦æ­¢

| ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|------|
| `.env` | OpenAI APIã‚­ãƒ¼å«ã‚€ |
| `.env.local` | ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒå¤‰æ•° |
| `*.db` | å€‹äººæƒ…å ±ï¼ˆãŠå•ã„åˆã‚ã›DBï¼‰ |
| `*.key` | ç§˜å¯†éµ |
| `*.log` | ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ« |
| `node_modules/` | å¤§é‡ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ |

### âœ… ãƒ—ãƒƒã‚·ãƒ¥å¯èƒ½

| ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ |
|---------|------|
| `.env.example` | ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå€¤ãªã—ï¼‰ |
| `*.js` | ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ |
| `vercel.json` | ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š |
| `package.json` | ä¾å­˜é–¢ä¿‚å®šç¾© |
| `*.md` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |

---

## ğŸŒ Vercelãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒ‡ãƒ—ãƒ­ã‚¤å…ƒ
- **ã‚½ãƒ¼ã‚¹**: `project/website-main/api/`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: `api`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID**: `prj_ryZ8aExbv6WE642bEszvMKllx9rF`

### ç’°å¢ƒå¤‰æ•°ï¼ˆVercelã§è¨­å®šæ¸ˆã¿ï¼‰

```bash
OPENAI_API_KEY=sk-xxx...  # OpenAI APIã‚­ãƒ¼
NODE_ENV=production
FRONTEND_URL=https://shin-ai-inc.github.io/website
CHATBOT_API_PORT=3001
```

**è¨­å®šå ´æ‰€**: Vercel Dashboard â†’ Project Settings â†’ Environment Variables

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. project/website-main/api/ ã«ç§»å‹•
cd C:\Users\masa\ai-long-memoryi-system\project\website-main\api

# 2. Vercelã«ãƒ­ã‚°ã‚¤ãƒ³
vercel login

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
vercel --prod

# 4. å‹•ä½œç¢ºèª
curl https://api-massaa39s-projects.vercel.app/api/chatbot/health
```

---

## ğŸ› ï¸ ä¿å®ˆé‹ç”¨ãƒ«ãƒ¼ãƒ«

### ãƒ«ãƒ¼ãƒ«1: ä½œæ¥­å ´æ‰€ã®å³å®ˆ

âœ… **ä½œæ¥­å¯èƒ½**:
```
C:\Users\masa\ai-long-memoryi-system\project\website-main\api\
```

âŒ **ä½œæ¥­ç¦æ­¢**:
```
C:\Users\masa\ai-long-memoryi-system\api\  â† ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
C:\Users\masa\ai-long-memoryi-system\project\ä»–ã®ãƒ•ã‚©ãƒ«ãƒ€\
```

### ãƒ«ãƒ¼ãƒ«2: å¤‰æ›´ç®¡ç†

1. **ãƒ–ãƒ©ãƒ³ãƒä½œæˆ**:
   ```bash
   cd C:\Users\masa\ai-long-memoryi-system\project\website-main
   git checkout gh-pages
   git pull
   git checkout -b fix/api-update-YYYYMMDD
   ```

2. **å¤‰æ›´å®Ÿæ–½**:
   - `project/website-main/api/` å†…ã®ã¿ä¿®æ­£

3. **æ©Ÿå¯†æƒ…å ±ãƒã‚§ãƒƒã‚¯**:
   ```bash
   git diff --cached | grep -E "(sk-|password|token|secret)"
   ```

4. **ã‚³ãƒŸãƒƒãƒˆ**:
   ```bash
   git add api/ãƒ•ã‚¡ã‚¤ãƒ«å
   git commit -m "fix: APIä¿®æ­£å†…å®¹"
   ```

5. **ãƒ—ãƒƒã‚·ãƒ¥**:
   ```bash
   git push -u origin fix/api-update-YYYYMMDD
   ```

6. **PRä½œæˆ**:
   ```bash
   gh pr create --title "fix: APIä¿®æ­£ã‚¿ã‚¤ãƒˆãƒ«" --base gh-pages
   ```

### ãƒ«ãƒ¼ãƒ«3: ã‚¨ãƒ©ãƒ¼é˜²æ­¢ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å¤‰æ›´å‰ã«å¿…ãšç¢ºèª:

- [ ] ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ `project/website-main/api/` ã‹ï¼Ÿ
- [ ] `.env`, `.db` ãƒ•ã‚¡ã‚¤ãƒ«ã¯å«ã¾ã‚Œã¦ã„ãªã„ã‹ï¼Ÿ
- [ ] `node_modules/` ã¯é™¤å¤–ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å«ã¾ã‚Œã¦ã„ãªã„ã‹ï¼Ÿ
- [ ] `git status` ã§ç¢ºèªã—ãŸã‹ï¼Ÿ
- [ ] ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã¨ç«¶åˆã—ãªã„ã‹ï¼Ÿ

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼1: APIæ¥ç¶šå¤±æ•—

**ç—‡çŠ¶**: ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆãŒå¿œç­”ã—ãªã„

**ç¢ºèªäº‹é …**:
1. Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹
2. ç’°å¢ƒå¤‰æ•° `OPENAI_API_KEY` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã® `CHATBOT_API_URL` ãŒæ­£ã—ã„ã‹

**è§£æ±ºæ–¹æ³•**:
```bash
# Vercelãƒ­ã‚°ç¢ºèª
vercel logs https://api-massaa39s-projects.vercel.app

# APIãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl https://api-massaa39s-projects.vercel.app/api/chatbot/health
```

### ã‚¨ãƒ©ãƒ¼2: RAGæ¤œç´¢å¤±æ•—

**ç—‡çŠ¶**: ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆãŒã€ŒçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã«è©²å½“ã™ã‚‹æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ã‚’è¿”ã™

**ç¢ºèªäº‹é …**:
1. `knowledge-base/` ã«çŸ¥è­˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹
2. `lib/simple-rag-system.js` ãŒæ­£å¸¸ã‹

**è§£æ±ºæ–¹æ³•**:
```bash
# çŸ¥è­˜ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
node initialize-rag-system.js
```

### ã‚¨ãƒ©ãƒ¼3: DBæ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å¤±æ•—

**ç¢ºèªäº‹é …**:
1. `contact_inquiries.db` ãŒå­˜åœ¨ã™ã‚‹ã‹
2. æ›¸ãè¾¼ã¿æ¨©é™ãŒã‚ã‚‹ã‹

**è§£æ±ºæ–¹æ³•**:
```bash
# DBå†ä½œæˆï¼ˆãƒ‡ãƒ¼ã‚¿æ¶ˆå¤±æ³¨æ„ï¼ï¼‰
sqlite3 contact_inquiries.db < scripts/init-db.sql
```

---

## ğŸ“Š ç›£è¦–ãƒ»ãƒ­ã‚°

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

- `chatbot-api.log` - ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆAPIãƒ­ã‚°
- Vercelãƒ­ã‚° - Vercel Dashboardã§ç¢ºèª

### ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

- **Vercel Analytics**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
- **Vercel Logs**: ã‚¨ãƒ©ãƒ¼è¿½è·¡
- **OpenAI Usage**: APIã‚³ã‚¹ãƒˆç¢ºèª

---

## ğŸ”„ ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025-12-08 | 1.0.0 | APIä¸€å…ƒåŒ–ï¼ˆãƒ«ãƒ¼ãƒˆ api/ ã‚’çµ±åˆï¼‰ |
| 2025-12-08 | 1.0.0 | chatbot-api.js v7.0.0å¯¾å¿œ |
| 2025-12-08 | 1.0.0 | contact-api.js è¿½åŠ  |

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:

1. ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç¢ºèª
2. Vercelãƒ­ã‚°ã‚’ç¢ºèª
3. GitHubã§Issueã‚’ä½œæˆ

---

## ğŸ¯ é‡è¦ãªåŸå‰‡

### âœ… å®Ÿæ–½ã™ã‚‹ã“ã¨
1. `project/website-main/api/` å†…ã§ã®ã¿ä½œæ¥­
2. å¤‰æ›´å‰ã«å¿…ãš `git status` ã§ç¢ºèª
3. æ©Ÿå¯†æƒ…å ±ã‚’é™¤å¤–
4. PRãƒ—ãƒ­ã‚»ã‚¹ã‚’çµŒç”±
5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### âŒ å®Ÿæ–½ã—ãªã„ã“ã¨
1. è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®ä½œæ¥­
2. `.env`, `.db` ã®ãƒ—ãƒƒã‚·ãƒ¥
3. å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ (`--force`)
4. ç›´æ¥ gh-pages ã¸ã®ãƒ—ãƒƒã‚·ãƒ¥
5. ãƒ†ã‚¹ãƒˆå‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€APIä¿å®ˆé‹ç”¨ã®å”¯ä¸€ã®ä¿¡é ¼ã§ãã‚‹ã‚½ãƒ¼ã‚¹ã§ã™ã€‚**
**å¤‰æ›´æ™‚ã¯å¿…ãšã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚**
